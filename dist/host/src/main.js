define("happy/app/BaseApp",[],function(){var e=function(){var e=this,t=function(){};e.container=document.body,e.setup=t,e.update=t,e.draw=t,e.onKeyUp=t,e.onKeyDown=t,e.onMouseOver=t,e.onMouseOut=t,e.onMouseDown=t,e.onMouseUp=t,e.onMouseMove=t,e.onClick=t,e.onDoubleClick=t,e.onResize=t,e.setFPS=t,e.enterFullscreen=t,e.exitFullscreen=t,e.toggleFullscreen=t,e.isFullscreen=t};return e}),function(e){function t(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function n(e,t){if(typeof e!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&!!this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,n,r,i){var s=this._indexOfListener(e,r),o;if(s!==-1){o=this._bindings[s];if(o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new t(this,e,n,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){var n=this._bindings.length,r;while(n--){r=this._bindings[n];if(r._listener===e&&r.context===t)return n}return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");var r=this._indexOfListener(e,t);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){var e=this._bindings.length;while(e--)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(!this.active)return;var t=Array.prototype.slice.call(arguments),n=this._bindings.length,r;this.memorize&&(this._prevParams=t);if(!n)return;r=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(r[n]&&this._shouldPropagate&&r[n].execute(t)!==!1)},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var i=r;i.Signal=r,typeof define=="function"&&define.amd?define("happy/_libs/signals",[],function(){return i}):typeof module!="undefined"&&module.exports?module.exports=i:e.signals=i}(this),define("HostSocketInterface",["happy/_libs/signals"],function(e){var t=function(t){var n=this,r,i=["question"],s=["stats-data"],o,u,a,f,l=function(n){o=t.connect(n),o.on("error",function(){setTimeout(function(){o.socket.connect()},1e3)}),o.on("connect",h),o.on("login",p),o.on("question",d),o.on("interaction-query",v),f=new e,a=new e,u=new e},c=function(){o.emit("interaction-query",{type:"question"})},h=function(){o.emit("identity",{uuid:localStorage.getItem("host_uuid"),listens:i,reports:s})},p=function(e){r=e,localStorage.setItem("host_uuid",r),console.log("login",r),f.dispatch(),o.emit("interaction-query-distinct",{field:"uuid",query:{type:"clap"}},function(e){console.log(e)})},d=function(e){console.log("question",e),a.dispatch(e)},v=function(e){console.log("feed",e),u.dispatch(e)},m=function(e){console.log("emit stats-data",e),o.emit("stats-data",e)},g=function(){return f},y=function(){return a},b=function(){return u};Object.defineProperty(n,"connect",{value:l}),Object.defineProperty(n,"update",{value:c}),Object.defineProperty(n,"loginSignal",{get:g}),Object.defineProperty(n,"questionSignal",{get:y}),Object.defineProperty(n,"feedSignal",{get:b}),Object.defineProperty(n,"sendData",{value:m})};return t}),define("App",["happy/app/BaseApp",_HOST+"/socket.io/socket.io.js","HostSocketInterface"],function(e,t,n){var r="ontouchstart"in document.documentElement?"touchstart":"click",i="ontouchend"in document.documentElement?"touchend":"click",s=function(){var e=this,r,i,s,o,u,a;e.setup=function(){s=[],o=v("host_unmoderatedQuestions"),o||(o={}),u=v("host_topQuestions"),u||(u={}),a=v("host_deletedQuestions"),a||(a={}),i={},f(),e.container.appendChild(i.feed.container),l(),e.container.appendChild(i.top.container),r=new n(t),r.connect(_HOST),r.loginSignal.add(function(){r.update(),setInterval(r.update,1e4)}),r.feedSignal.add(function(e){e.length>s.length&&(s.length?p(e):h(e),s=e)});var c=document.getElementById("speaker"),d=document.getElementById("start-time"),m=document.getElementById("end-time"),g=document.getElementById("go");g.addEventListener("click",function(e){e.preventDefault();var t=c.value,n=d.value.split(":"),s=m.value.split(":"),o=[];for(var u=0;u<i.top.list.children.length;u++){var a=i.top.list.children[u]._data.data.question;o.push(a)}if(!t||n.length!=2||s.length!=2||!o.length){alert("There is an error in the settings!");return}var f={title:t,questions:o,time_from:n,time_to:s};r.sendData(f)})};var f=function(){var e=document.createElement("div");e.id="feed",e.className="screen",e.title="Incoming";var t={container:e};i.feed=t,t.list=document.createElement("div"),t.list.className="list",e.appendChild(t.list)},l=function(){var e=document.createElement("div");e.id="top",e.className="screen",e.title="Top";var t={container:e};i.top=t,t.list=document.createElement("div"),t.list.className="list",e.appendChild(t.list)},c=function(e){var t=document.createElement("div");t.className="item",t._data=e;var n=new Date(e.created),r=document.createElement("div");r.className="time",r.innerHTML="<b>"+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"</b>",t.appendChild(r),r.innerHTML+=" "+e.data.from;var s=document.createElement("div");s.className="question",s.innerHTML=e.data.question,t.appendChild(s);var f=document.createElement("button");f.className="approve",f.innerHTML="Approve",t.appendChild(f),f.addEventListener("click",function(){u[e._id]=!0,delete o[e._id],d("host_topQuestions",u),d("host_unmoderatedQuestions",o),t.parentNode.removeChild(t),i.top.list.insertBefore(t,i.top.list.firstChild)});var l=document.createElement("button");l.className="send-message",l.innerHTML="Message",l.addEventListener("click",function(){window.location="/notifier/?to="+e.data.from});var c=document.createElement("button");return c.className="remove",c.innerHTML="Remove",t.appendChild(c),c.addEventListener("click",function(){a[e._id]=!0,delete o[e._id],d("host_deletedQuestions",a),d("host_unmoderatedQuestions",o),t.parentNode.removeChild(t)}),t},h=function(e){console.log("populate"),i.feed.list.innerHTML="",i.top.list.innerHTML="",o={};for(var t=e.length-1;t>=0;t--){var n=e[t]._id;if(a[n])continue;var r=c(e[t]),s;u[n]?s=i.top.list:(o[n]=!0,s=i.feed.list),s.appendChild(r)}d("host_unmoderatedQuestions",o)},p=function(e){console.log("update");var t=i.feed.list.firstChild;for(var n=e.length-1;n>=0;n--){var r=e[n]._id;if(a[r])continue;if(u[r])continue;if(o[r])continue;o[r]=!0;var s=c(e[n]);i.feed.list.insertBefore(s,t),t=i.feed.list.firstChild}d("host_unmoderatedQuestions",o)},d=function(e,t){localStorage.setItem(e,JSON.stringify(t))},v=function(e){return JSON.parse(localStorage.getItem(e))}};return s.prototype=new e,s}),define("happy/utils/DOM",[],function(){var e=function(){var e=this,t=function(e,t){return typeof e.classList=="undefined"?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):e.classList.contains(t)},n=function(e,t){typeof e.classList=="undefined"?this.hasClass(e,t)||(e.className+=" "+t):e.classList.add(t)},r=function(e,n){if(typeof e.classList=="undefined"){if(t(e,n)){var r=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(r," ")}}else e.classList.remove(n)},i=function(e){while(e.lastChild)e.removeChild(e.lastChild)},s=function(e){var t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}};Object.defineProperty(e,"hasClass",{value:t}),Object.defineProperty(e,"addClass",{value:n}),Object.defineProperty(e,"removeClass",{value:r}),Object.defineProperty(e,"empty",{value:i}),Object.defineProperty(e,"measure",{value:s})};return e}),define("happy/polyfill/console",[],function(){return window.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}}}),define("happy/_libs/mout/array/forEach",[],function(){function e(e,t,n){if(e==null)return;var r=-1,i=e.length;while(++r<i)if(t.call(n,e[r],r,e)===!1)break}return e}),define("happy/_libs/mout/array/indexOf",[],function(){function e(e,t,n){n=n||0;var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t)return i;i+=1}return-1}return e}),define("happy/_libs/mout/array/combine",["./indexOf"],function(e){function t(t,n){var r,i=n.length;for(r=0;r<i;r++)e(t,n[r])===-1&&t.push(n[r]);return t}return t}),define("happy/_libs/mout/lang/toString",[],function(){function e(e){return e==null?"":e.toString()}return e}),define("happy/_libs/mout/string/replaceAccents",["../lang/toString"],function(e){function t(t){return t=e(t),t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}return t}),define("happy/_libs/mout/string/removeNonWord",["../lang/toString"],function(e){function t(t){return t=e(t),t.replace(/[^0-9a-zA-Z\xC0-\xFF \-]/g,"")}return t}),define("happy/_libs/mout/string/upperCase",["../lang/toString"],function(e){function t(t){return t=e(t),t.toUpperCase()}return t}),define("happy/_libs/mout/string/lowerCase",["../lang/toString"],function(e){function t(t){return t=e(t),t.toLowerCase()}return t}),define("happy/_libs/mout/string/camelCase",["../lang/toString","./replaceAccents","./removeNonWord","./upperCase","./lowerCase"],function(e,t,n,r,i){function s(s){return s=e(s),s=t(s),s=n(s).replace(/\-/g," ").replace(/\s[a-z]/g,r).replace(/\s+/g,"").replace(/^[A-Z]/g,i),s}return s}),define("happy/_libs/mout/string/pascalCase",["../lang/toString","./camelCase","./upperCase"],function(e,t,n){function r(r){return r=e(r),t(r).replace(/^[a-z]/,n)}return r}),define("happy/utils/Vendor",["../polyfill/console","../_libs/mout/array/forEach","../_libs/mout/array/combine","../_libs/mout/string/pascalCase"],function(e,t,n,r){var i=["WebKit","Moz","O","Ms"],s=[],o=[];t(i,function(e){s.push(r(e)),o.push(e.toLowerCase())});var u=n(s,o),a=function(){var t=this,n=function(t,n){if(!t)return;var i=r(t);n=n||window;var s=t,o=n[s];if(typeof o=="undefined")for(var a=0;a<u.length;a++){s=u[a]+i,o=n[s];if(typeof o!="undefined")break}if(typeof o=="undefined"){e.log(t+" is not implemented.");return}return{name:s,context:n}},i=function(e,t){var r=n(e,t);if(!r)return;return function(){r.context[r.name].apply(r.context,arguments)}},s=function(e,t){var r=n(e,t);if(!r)return;return r.context[r.name]},o=function(e,t){var r=n(e,t);if(!r)return;return r.name};Object.defineProperty(t,"validateMethod",{value:i}),Object.defineProperty(t,"validateConstructor",{value:s}),Object.defineProperty(t,"validateName",{value:o})};return a}),define("happy/_libs/mout/object/hasOwn",[],function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return e}),define("happy/_libs/mout/lang/kindOf",[],function(){function r(r){return r===null?"Null":r===n?"Undefined":e.exec(t.call(r))[1]}var e=/^\[object (.*)\]$/,t=Object.prototype.toString,n;return r}),define("happy/_libs/mout/lang/isPlainObject",[],function(){function e(e){return!!e&&typeof e=="object"&&e.constructor===Object}return e}),define("happy/_libs/mout/object/forIn",[],function(){function n(){t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=!0;for(var n in{toString:null})e=!1}function r(r,s,o){var u,a=0;e==null&&n();for(u in r)if(i(s,r,u,o)===!1)break;if(e)while(u=t[a++])if(r[u]!==Object.prototype[u]&&i(s,r,u,o)===!1)break}function i(e,t,n,r){return e.call(r,t[n],n,t)}var e,t;return r}),define("happy/_libs/mout/object/forOwn",["./hasOwn","./forIn"],function(e,t){function n(n,r,i){t(n,function(t,s){if(e(n,s))return r.call(i,n[s],s,n)})}return n}),define("happy/_libs/mout/object/mixIn",["./forOwn"],function(e){function t(t,r){var i=0,s=arguments.length,o;while(++i<s)o=arguments[i],o!=null&&e(o,n,t);return t}function n(e,t){this[t]=e}return t}),define("happy/_libs/mout/lang/clone",["./kindOf","./isPlainObject","../object/mixIn"],function(e,t,n){function r(t){switch(e(t)){case"Object":return i(t);case"Array":return u(t);case"RegExp":return s(t);case"Date":return o(t);default:return t}}function i(e){return t(e)?n({},e):e}function s(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignorecase?"i":"",new RegExp(e.source,t)}function o(e){return new Date(+e)}function u(e){return e.slice()}return r}),define("happy/_libs/mout/lang/deepClone",["./clone","../object/forOwn","./kindOf","./isPlainObject"],function(e,t,n,r){function i(t,r){switch(n(t)){case"Object":return s(t,r);case"Array":return o(t,r);default:return e(t)}}function s(e,n){if(r(e)){var s={};return t(e,function(e,t){this[t]=i(e,n)},s),s}return n?n(e):e}function o(e,t){var n=[],r=-1,s=e.length,o;while(++r<s)n[r]=i(e[r],t);return n}return i}),define("happy/_libs/mout/lang/isKind",["./kindOf"],function(e){function t(t,n){return e(t)===n}return t}),define("happy/_libs/mout/lang/isObject",["./isKind"],function(e){function t(t){return e(t,"Object")}return t}),define("happy/_libs/mout/object/merge",["./hasOwn","../lang/deepClone","../lang/isObject"],function(e,t,n){function r(){var i=1,s,o,u,a;a=t(arguments[0]);while(u=arguments[i++])for(s in u){if(!e(u,s))continue;o=u[s],n(o)&&n(a[s])?a[s]=r(a[s],o):a[s]=t(o)}return a}return r}),define("happy/app/Runner",["../utils/DOM","../utils/Vendor","../_libs/mout/object/merge"],function(e,t,n){var r=new t,i=new e,s=r.validateMethod("requestAnimationFrame"),o=r.validateConstructor("MutationObserver"),u=function(e){function y(){l(y);var t=g(),n=t-a;a=t,f=a-u,e.update.apply(e,[n,f]),e.draw.apply(e,[n,f])}var t=this,n=e.container,u,a,f,l;n.tabIndex="1",n.addEventListener("keyup",function(t){e.onKeyUp.apply(e,[t])},!1),n.addEventListener("keydown",function(t){e.onKeyDown.apply(e,[t])},!1),n.addEventListener("mouseover",function(t){e.onMouseOver.apply(e,[t])},!1),n.addEventListener("mouseout",function(t){e.onMouseOut.apply(e,[t])},!1),n.addEventListener("mousedown",function(t){e.onMouseDown.apply(e,[t])},!1),n.addEventListener("mouseup",function(t){e.onMouseUp.apply(e,[t])},!1),n.addEventListener("mousemove",function(t){e.onMouseMove.apply(e,[t])},!1),n.addEventListener("click",function(t){e.onClick.apply(e,[t])},!1),n.addEventListener("dblclick",function(t){e.onDoubleClick.apply(e,[t])},!1);var c=i.measure(n),h=function(){var t=i.measure(n);(t.width!=c.width||t.height!=c.height)&&e.onResize.apply(e,[t]),c=t};window.addEventListener("resize",h,!1),window.addEventListener("scroll",h,!1);if(o){var p=new o(h);p.observe(document.body,{subtree:!0,childList:!0,characterData:!0,attribute:!0})}var d=function(){r.validateMethod("cancelFullScreen",document).apply(document)},v=function(){r.validateMethod("requestFullScreen",n).apply(n,[Element.ALLOW_KEYBOARD_INPUT])},m=!1;e.enterFullscreen=function(){m=!0,v(),n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.minWidth="100%",n.style.minHeight="100%",n.style.maxWidth="100%",n.style.maxHeight="100%"},e.exitFullscreen=function(){m=!1,n.removeAttribute("style"),d()},e.toggleFullscreen=function(){m?e.exitFullscreen():e.enterFullscreen()},e.isFullscreen=function(){return m},e.setFPS=function(e){e<0&&(e=0);switch(e){case"auto":s?l=s:l=function(e){setTimeout(e,1e3/60)};break;case 0:l=function(e){};break;default:l=function(t){setTimeout(t,1e3/e)}}};var g;window.performance&&window.performance.now?g=function(){return window.performance.now()*.001}:window.performance&&window.performance.webkitNow?g=function(){return window.performance.webkitNow()*.001}:g=function(){return(new Date).getTime()*.001},e.setFPS("auto"),e.setup.apply(e),e.onResize.apply(e,[c]),u=g(),a=u,f=0,y()};return u}),require(["App","happy/app/Runner"],function(e,t){var n=new e,r=new t(n)}),define("main",function(){});